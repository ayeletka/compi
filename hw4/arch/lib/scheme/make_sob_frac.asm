 MAKE_SOB_FRAC:
  PUSH(FP);
  MOV(FP, SP);
  PUSH(IMM(3));
  CALL(MALLOC);
  DROP(1);


  PUSH(IMM(2));
  CALL(GCD);
  DROP(1);
  MOV(R2, FPARG(0));
  DIV(R2, R0);
  MOV(R3, FPARG(1));
  DIV(R3, R0);
  MOV(IND(R0), T_FRAC);
  MOV(INDD(R0, 1), R2); ;; 1
  MOV(INDD(R0, 2), R3);  ;; 2
  POP(FP);
  RETURN;


GCD:
PUSH(FP);
MOV(FP, SP);

CMP(FPARG(2), IMM(2));
JUMP_NE(L_ERROR_INCORRECT_NUMBER_OF_ARGS);
MOV(R1, FPARG(0));  ;;;1
CMP(R1, IMM(T_INTEGER));
JUMP_NE(L_ERROR_NOT_AN_INTEGER);
MOV(R2, FPARG(1));  ;;;2
CMP(R2, IMM(T_INTEGER));
JUMP_NE(L_ERROR_NOT_AN_INTEGER);
CMP(INDD(R2, 1), IMM(0));
JUMP_EQ(L_SECOND_ARG_CANNOT_BE_ZERO);
MOV(R1, INDD(R1, 1));
MOV(R2, INDD(R2, 1));
GCD_LOOP:
MOV(R3, R1);
REM(R3, R2);
CMP(R3, IMM(0));
JUMP_EQ(GCD_EXIT);
MOV(R1, R2);
MOV(R2, R3);
JUMP(GCD_LOOP);

GCD_EXIT:
PUSH(R2);
CALL(MAKE_SOB_INT);
DROP(1);

POP(FP);
RETURN;

L_ERROR_INCORRECT_NUMBER_OF_ARGS:


L_ERROR_NOT_AN_INTEGER:

L_ERROR_NOT_AN_INTEGER:

L_SECOND_ARG_CANNOT_BE_ZERO:








